window.wheelzoom=function(){var e={zoom:.1,maxZoom:!1},t=document.createElement("canvas"),n=function(n,o){function a(e){e.style.backgroundImage='url("'+e.src+'")',e.style.backgroundRepeat="no-repeat",t.width=e.naturalWidth,t.height=e.naturalHeight,E=t.toDataURL(),e.src=E}function r(){f>0?f=0:f<l-g&&(f=l-g),w>0?w=0:w<v-p&&(w=v-p),n.style.backgroundSize=g+"px "+p+"px",n.style.backgroundPosition=f+"px "+w+"px"}function u(){g=l,p=v,f=w=0,r()}function d(e){var t=0;e.preventDefault(),e.deltaY?t=e.deltaY:e.wheelDelta&&(t=-e.wheelDelta);var o=n.getBoundingClientRect(),a=e.pageX-o.left-window.pageXOffset,d=e.pageY-o.top-window.pageYOffset,m=(a-f)/g,i=(d-w)/p;t<0?(g+=g*y.zoom,p+=p*y.zoom):(g-=g*y.zoom,p-=p*y.zoom),y.maxZoom&&(g=Math.min(l*y.maxZoom,g),p=Math.min(v*y.maxZoom,p)),f=a-g*m,w=d-p*i,g<=l||p<=v?u():r()}function m(e){e.preventDefault(),f+=e.pageX-h.pageX,w+=e.pageY-h.pageY,h=e,r()}function i(){document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",m)}function s(e){e.preventDefault(),h=e,document.addEventListener("mousemove",m),document.addEventListener("mouseup",i)}function c(){if(n.src!==E){var e=window.getComputedStyle(n,null);l=parseInt(e.width,10),v=parseInt(e.height,10),g=l,p=v,f=0,w=0,a(n),n.style.backgroundSize=l+"px "+v+"px",n.style.backgroundPosition="0 0",n.addEventListener("wheelzoom.reset",u),n.addEventListener("wheel",d),n.addEventListener("mousedown",s)}}if(n&&n.nodeName&&"IMG"===n.nodeName){var l,v,g,p,f,w,h,E,y={},L=function(e){n.removeEventListener("wheelzoom.destroy",L),n.removeEventListener("wheelzoom.reset",u),n.removeEventListener("load",c),n.removeEventListener("mouseup",i),n.removeEventListener("mousemove",m),n.removeEventListener("mousedown",s),n.removeEventListener("wheel",d),n.style.backgroundImage=e.backgroundImage,n.style.backgroundRepeat=e.backgroundRepeat,n.src=e.src}.bind(null,{backgroundImage:n.style.backgroundImage,backgroundRepeat:n.style.backgroundRepeat,src:n.src});n.addEventListener("wheelzoom.destroy",L),o=o||{},Object.keys(e).forEach(function(t){y[t]=void 0!==o[t]?o[t]:e[t]}),n.complete&&c(),n.addEventListener("load",c)}};return"function"!=typeof window.getComputedStyle?function(e){return e}:function(e,t){return e&&e.length?Array.prototype.forEach.call(e,n,t):e&&e.nodeName&&n(e,t),e}}();